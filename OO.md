# 面对对象

* 封装: 隐藏内部实现
* 继承: 复用现有代码
* 多态: 改写对象行为
* 抽象: 忽略非本质细节,而去处理泛化和理想化对象模型
* 复用

多用组合, 少用继承

封装变化

找到变化的地方,将它们从不变的地方分离出来

针对接口编程, 不针对实现编程

为交互对象之间松耦合设计而努力

类对扩展开放,对修改关闭

组合和委托可用于运行时动态的添加新的行为

依赖倒置原则: 依赖抽象, 不依赖具体类



组合关系（Composition）：部分和整体之间具有相同的生命周期，当整体消亡后，部分也将消亡。就像大雁的翅膀和大雁是组合关系。代码实现时，部分类在整体类的构造函数中被构造，在析构函数中被析构。

聚合关系（Aggregation）：部分与整体之间并没有相同的生命周期，整体消亡后部分可以独立存在。就像大雁和雁群是聚合关系。代码实现时，整体类中传入一个部分类的指针，部分类已经在整体类外被构造，因而在整体类析构的时候，部分类并没有被析构。

聚合和组合的区别在于：聚合关系是“has-a”关系，组合关系是“contains-a”关系；聚合关系表示整体与部分的关系比较弱，而组合比较强；聚合关系中代表部分事物的对象与代表聚合事物的对象的生存期无关，一旦删除了聚合对象不一定就删除了代表部分事物的对象。组合中一旦删除了组合对象，同时也就删除了代表部分事物的对象。

我们用浅显的例子来说明聚合和组合的区别。“国破家亡”，国灭了，家自然也没有了，“国”和“家”显然也是组合关系。而相反的，计算机和它的外设之间就是聚合关系，因为它们之间的关系相对松散，计算机没了，外设还可以独立存在，还可以接在别的计算机上。在聚合关系中，部分可以独立于聚合而存在，部分的所有权也可以由几个聚合来共享，比如打印机就可以在办公室内被广大同事共用。

聚合，关联，组合 是对象之间的三种关系。从某种意义上说，继承是一种类的纵向关系，而聚合，关联，组合是对象的横向关系。

其关系强弱为 关联<聚合<组合

关联和聚合的区别主要在语义上，关联的两个对象之间一般是平等的，例如你是我的朋友，聚合则一般不是平等的，例如一个公司包含了很多员工，其实现上是差不多的。聚合和组合的区别则在语义和实现上都有差别，组合的两个对象之间其生命期有很大的关联，被组合的对象是在组合对象创建的同时或者创建之后创建，在组合对象销毁之前销毁。一般来说被组合对象不能脱离组合对象独立存在，而且也只能属于一个组合对象，例如一个文档的版本，必须依赖于文档的存在，也只能属于一个文档。聚合则不一样，被聚合的对象可以属于多个聚合对象，例如一个员工可能可以属于多个公司。